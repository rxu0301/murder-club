# Requirements Document

## Introduction

"동아리 살인사건: 범인은 AI다"는 웹 기반 AI 인터랙티브 추리 게임입니다. 플레이어는 제한된 질문(10개 중 5개 선택)을 통해 5명의 등장인물 중 AI 범인을 찾아내는 게임입니다. 각 캐릭터는 인간 또는 AI 범인 역할을 수행하며, GPT API를 통해 자연스러운 대화를 생성합니다. 게임은 반응형 웹 디자인으로 PC와 모바일 환경 모두에서 원활하게 작동해야 합니다.

## Requirements

### Requirement 1: 게임 기본 구조 및 흐름

**User Story:** 사용자로서, 나는 직관적인 게임 흐름과 명확한 UI를 통해 추리 게임을 즐기고 싶다.

#### Acceptance Criteria

1. WHEN 사용자가 게임을 시작하면 THEN 시스템은 인트로 화면을 표시해야 한다.
2. WHEN 사용자가 게임을 시작하면 THEN 시스템은 5명의 등장인물 중 무작위로 한 명을 AI 범인으로 지정해야 한다.
3. WHEN 사용자가 인트로 화면에서 '시작하기' 버튼을 클릭하면 THEN 시스템은 질문 선택 화면으로 이동해야 한다.
4. WHEN 사용자가 질문을 모두 완료하면 THEN 시스템은 AI 범인 선택 화면을 표시해야 한다.
5. WHEN 사용자가 범인을 선택하면 THEN 시스템은 정답 여부와 함께 결과 화면을 표시해야 한다.
6. WHEN 사용자가 결과 화면에서 '다시 하기' 버튼을 클릭하면 THEN 시스템은 새로운 게임을 시작해야 한다.

### Requirement 2: 캐릭터 및 질문 시스템

**User Story:** 사용자로서, 나는 다양한 캐릭터와 질문을 통해 AI와 인간을 구분하는 추리 과정을 경험하고 싶다.

#### Acceptance Criteria

1. WHEN 게임이 시작되면 THEN 시스템은 5명의 등장인물(이한결, 김소이, 박주현, 정세윤, 윤지호(피해자))을 제공해야 한다.
2. WHEN 사용자가 질문 선택 화면에 진입하면 THEN 시스템은 10개의 질문 후보를 표시해야 한다.
3. WHEN 사용자가 질문을 선택하면 THEN 시스템은 해당 질문을 각 캐릭터에게 할 수 있는 대화창을 제공해야 한다.
4. WHEN 사용자가 특정 캐릭터에게 질문을 하면 THEN 시스템은 해당 캐릭터의 역할(인간/AI 범인)에 맞는 GPT 기반 답변을 생성해야 한다.
5. WHEN 사용자가 5개의 질문을 모두 사용하면 THEN 시스템은 질문 단계를 종료하고 범인 선택 단계로 넘어가야 한다.
6. IF 캐릭터가 AI 범인이면 THEN 시스템은 해당 캐릭터의 답변에 미묘한 AI 특성(논리적 오류, 감정 표현 부자연스러움 등)을 포함시켜야 한다.

### Requirement 3: AI 응답 생성 시스템

**User Story:** 사용자로서, 나는 캐릭터별로 차별화된 자연스러운 대화를 통해 몰입감 있는 추리 경험을 하고 싶다.

#### Acceptance Criteria

1. WHEN 사용자가 캐릭터에게 질문하면 THEN 시스템은 GPT API를 사용하여 캐릭터별 프롬프트에 맞는 답변을 생성해야 한다.
2. WHEN 시스템이 인간 캐릭터의 답변을 생성할 때 THEN 자연스러운 대화와 일관된 성격을 유지해야 한다.
3. WHEN 시스템이 AI 범인 캐릭터의 답변을 생성할 때 THEN 미묘한 논리적 오류나 부자연스러운 감정 표현을 포함해야 한다.
4. WHEN 시스템이 답변을 생성할 때 THEN 각 캐릭터의 개성(이한결: 논리적, 김소이: 감성적, 박주현: 간결함, 정세윤: 유머러스)을 반영해야 한다.
5. WHEN 시스템이 답변을 생성할 때 THEN 동일한 질문에 대해서도 캐릭터별로 다른 스타일의 답변을 제공해야 한다.
6. IF 네트워크 오류나 API 응답 지연이 발생하면 THEN 시스템은 적절한 오류 메시지를 표시하고 재시도 옵션을 제공해야 한다.

### Requirement 4: 사용자 인터페이스 및 경험

**User Story:** 사용자로서, 나는 직관적이고 매력적인 UI/UX를 통해 게임에 몰입하고 싶다.

#### Acceptance Criteria

1. WHEN 사용자가 게임에 접속하면 THEN 시스템은 PC와 모바일 환경 모두에서 최적화된 반응형 디자인을 제공해야 한다.
2. WHEN 사용자가 대화를 진행할 때 THEN 시스템은 메신저 스타일의 UI로 대화 내용을 표시해야 한다.
3. WHEN 캐릭터가 답변을 생성 중일 때 THEN 시스템은 로딩 애니메이션을 표시해야 한다.
4. WHEN 사용자가 질문을 선택할 때 THEN 시스템은 남은 질문 수를 표시해야 한다.
5. WHEN 사용자가 게임을 진행하면 THEN 시스템은 현재 게임 진행 상태(질문 단계, 범인 선택 단계 등)를 명확히 표시해야 한다.
6. WHEN 사용자가 결과 화면을 볼 때 THEN 시스템은 정답 여부와 함께 게임 결과에 대한 피드백을 제공해야 한다.

### Requirement 5: 데이터 관리 및 세션 유지

**User Story:** 사용자로서, 나는 게임 진행 상태가 안정적으로 유지되어 중단 없이 게임을 즐기고 싶다.

#### Acceptance Criteria

1. WHEN 사용자가 게임을 진행 중일 때 THEN 시스템은 현재 게임 상태(선택한 질문, 대화 내용 등)를 세션에 저장해야 한다.
2. WHEN 사용자가 페이지를 새로고침하거나 잠시 이탈했다가 돌아오면 THEN 시스템은 이전 게임 상태를 복원해야 한다.
3. WHEN 게임이 종료되면 THEN 시스템은 게임 결과(정답 여부, 사용한 질문 등)를 저장해야 한다.
4. WHEN 사용자가 새 게임을 시작하면 THEN 시스템은 이전 게임 데이터를 초기화하고 새로운 게임 세션을 생성해야 한다.
5. IF 서버 연결이 끊어지면 THEN 시스템은 마지막 상태를 로컬에 캐시하고 연결 복구 시 게임을 계속할 수 있어야 한다.
6. WHEN 시스템이 GPT API와 통신할 때 THEN 응답 데이터를 캐시하여 동일한 질문에 대한 중복 요청을 방지해야 한다.